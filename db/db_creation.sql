-- crea la base de datos si no existe
CREATE DATABASE IF NOT EXISTS sales;

-- crea usuario si no existe
CREATE USER IF NOT EXISTS 'user_sales'@'localhost' IDENTIFIED BY '123@321';

-- da permisos al usuario sobre la base de datos
GRANT ALL PRIVILEGES ON sales.* TO 'user_sales'@'localhost';


USE sales;

-- crea tabla Categoria
CREATE TABLE IF NOT EXISTS Categoria (
    CodigoCategoria CHAR(36) PRIMARY KEY,
    Nombre VARCHAR(100) NOT NULL
);

-- crea tabla Producto
CREATE TABLE IF NOT EXISTS Producto (
    CodigoProducto CHAR(36) PRIMARY KEY,
    Nombre VARCHAR(100) NOT NULL,
    Precio DECIMAL(10, 2) NOT NULL, 
    CodigoCategoria CHAR(36) NOT NULL,
    FOREIGN KEY (CodigoCategoria) REFERENCES Categoria(CodigoCategoria)
);

-- crea tabla Venta
CREATE TABLE IF NOT EXISTS Venta (
    CodigoVenta CHAR(36) PRIMARY KEY,
    Fecha DATETIME NOT NULL,
    Cantidad INT NOT NULL DEFAULT 1, 
    PrecioUnitario DECIMAL(10, 2) NOT NULL, 
    Total DECIMAL(12, 2) NOT NULL, -- guarda el total de la venta 
    CodigoProducto CHAR(36) NOT NULL,
    FOREIGN KEY (CodigoProducto) REFERENCES Producto(CodigoProducto)
);

-- inserts para categorias
INSERT INTO Categoria (CodigoCategoria, Nombre) VALUES
('11111111-1111-1111-1111-111111111111', 'Electrónica'),
('22222222-2222-2222-2222-222222222222', 'Ropa'),
('33333333-3333-3333-3333-333333333333', 'Hogar'),
('44444444-4444-4444-4444-444444444444', 'Juguetes'),
('55555555-5555-5555-5555-555555555555', 'Libros');

-- inserts para productos
INSERT INTO Producto (CodigoProducto, Nombre,Precio, CodigoCategoria) VALUES
('a1', 'Televisor 42"', 30,'11111111-1111-1111-1111-111111111111'),
('a2', 'Laptop', 21.90,'11111111-1111-1111-1111-111111111111'),
('a3', 'Auriculares', 50,'11111111-1111-1111-1111-111111111111'),
('a4', 'Cámara Digital', 10,'11111111-1111-1111-1111-111111111111'),
('a5', 'Smartphone', 80,'11111111-1111-1111-1111-111111111111'),

('b1', 'Camiseta',12, '22222222-2222-2222-2222-222222222222'),
('b2', 'Jeans', 13,'22222222-2222-2222-2222-222222222222'),
('b3', 'Chaqueta',14, '22222222-2222-2222-2222-222222222222'),
('b4', 'Zapatos deportivos',55, '22222222-2222-2222-2222-222222222222'),
('b5', 'Gorra',80, '22222222-2222-2222-2222-222222222222'),

('c1', 'Silla', 23,'33333333-3333-3333-3333-333333333333'),
('c2', 'Mesa de comedor', 25,'33333333-3333-3333-3333-333333333333'),
('c3', 'Lámpara', 90,'33333333-3333-3333-3333-333333333333'),
('c4', 'Alfombra', 60,'33333333-3333-3333-3333-333333333333'),
('c5', 'Estante', 76,'33333333-3333-3333-3333-333333333333'),

('d1', 'Pelota', 43,'44444444-4444-4444-4444-444444444444'),
('d2', 'Rompecabezas', 21,'44444444-4444-4444-4444-444444444444'),
('d3', 'Muñeca', 45,'44444444-4444-4444-4444-444444444444'),
('d4', 'Carro a control', 34,'44444444-4444-4444-4444-444444444444'),
('d5', 'Bloques de construcción',90, '44444444-4444-4444-4444-444444444444');

-- inserts para ventas
INSERT INTO Venta (CodigoVenta, Fecha, Cantidad, PrecioUnitario, Total, CodigoProducto) VALUES
('v01', '2015-03-15', 2, 450.00, 900.00, 'a1'),
('v02', '2016-06-10', 1, 700.00, 700.00, 'a2'),
('v03', '2017-11-22', 3, 50.00, 150.00, 'a3'),
('v04', '2019-01-05', 1, 300.00, 300.00, 'a4'),
('v05', '2018-09-30', 2, 250.00, 500.00, 'a5'),

('v06', '2015-04-17', 1, 20.00, 20.00, 'b1'),
('v07', '2015-08-12', 2, 35.00, 70.00, 'b2'),
('v08', '2016-10-01', 1, 50.00, 50.00, 'b3'),
('v09', '2017-12-25', 1, 80.00, 80.00, 'b4'),
('v10', '2019-06-15', 3, 15.00, 45.00, 'b5'),

('v11', '2015-02-01', 1, 60.00, 60.00, 'c1'),
('v12', '2016-03-20', 1, 200.00, 200.00, 'c2'),
('v13', '2017-07-04', 2, 35.00, 70.00, 'c3'),
('v14', '2018-08-14', 1, 120.00, 120.00, 'c4'),
('v15', '2019-11-01', 1, 100.00, 100.00, 'c5'),

('v16', '2015-01-10', 1, 10.00, 10.00, 'd1'),
('v17', '2016-02-05', 2, 25.00, 50.00, 'd2'),
('v18', '2017-05-19', 1, 40.00, 40.00, 'd3'),
('v19', '2018-04-22', 3, 90.00, 270.00, 'd4'),
('v20', '2019-03-03', 2, 60.00, 120.00, 'd5'),

('v21', '2015-12-12', 1, 400.00, 400.00, 'a1'),
('v22', '2016-01-22', 2, 300.00, 600.00, 'a2'),
('v23', '2016-09-29', 1, 60.00, 60.00, 'a3'),
('v24', '2017-03-05', 1, 350.00, 350.00, 'a4'),
('v25', '2018-05-01', 2, 200.00, 400.00, 'a5'),

('v26', '2015-11-08', 1, 25.00, 25.00, 'b1'),
('v27', '2016-06-18', 3, 40.00, 120.00, 'b2'),
('v28', '2017-08-08', 1, 55.00, 55.00, 'b3'),
('v29', '2018-12-21', 1, 90.00, 90.00, 'b4'),
('v30', '2019-02-14', 2, 18.00, 36.00, 'b5'),

('v31', '2015-03-27', 2, 65.00, 130.00, 'c1'),
('v32', '2016-05-13', 1, 220.00, 220.00, 'c2'),
('v33', '2017-11-18', 2, 30.00, 60.00, 'c3'),
('v34', '2018-06-06', 1, 110.00, 110.00, 'c4'),
('v35', '2019-09-09', 1, 95.00, 95.00, 'c5'),

('v36', '2015-07-30', 1, 12.00, 12.00, 'd1'),
('v37', '2016-08-21', 2, 30.00, 60.00, 'd2'),
('v38', '2017-10-10', 1, 45.00, 45.00, 'd3'),
('v39', '2018-01-17', 2, 95.00, 190.00, 'd4'),
('v40', '2019-05-23', 1, 70.00, 70.00, 'd5'),

('v41', '2015-10-25', 1, 420.00, 420.00, 'a1'),
('v42', '2016-04-07', 1, 750.00, 750.00, 'a2'),
('v43', '2017-06-15', 2, 55.00, 110.00, 'a3'),
('v44', '2018-10-12', 1, 330.00, 330.00, 'a4'),
('v45', '2019-08-28', 2, 260.00, 520.00, 'a5'),

('v46', '2015-05-03', 2, 22.00, 44.00, 'b1'),
('v47', '2016-07-09', 1, 38.00, 38.00, 'b2'),
('v48', '2017-09-01', 1, 52.00, 52.00, 'b3'),
('v49', '2018-02-20', 1, 85.00, 85.00, 'b4'),
('v50', '2019-12-31', 3, 14.00, 42.00, 'b5');
